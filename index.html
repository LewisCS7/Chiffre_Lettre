<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8">
    <title>Convertisseur – Chiffres en lettres</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Tailwind CSS v4 CDN (alpha build) -->
    <script src="https://cdn.tailwindcss.com"></script>
  </head>

  <body class="min-h-screen flex items-center justify-center p-4 font-sans bg-gradient-to-br from-indigo-100 via-sky-100 to-emerald-100">
    <div class="w-full max-w-lg bg-white/80 backdrop-blur-md rounded-3xl shadow-2xl p-8 sm:p-12 space-y-8 border border-slate-200">
      <h1 class="text-3xl sm:text-4xl font-extrabold text-center bg-gradient-to-r from-indigo-500 via-sky-500 to-emerald-400 bg-clip-text text-transparent drop-shadow-md mb-2">
        Convertisseur de nombres
      </h1>
      <p class="text-center text-slate-500 text-base mb-2">Saisissez un nombre pour obtenir son écriture en toutes lettres</p>

      <label for="numberInput" class="block text-sm font-semibold text-slate-700 mb-1">
        Entrez un nombre
      </label>
      <input
        id="numberInput"
        type="text"
        inputmode="decimal"
        class="w-full px-5 py-3 border border-slate-200 rounded-lg focus:ring-2 focus:ring-emerald-400 focus:border-emerald-400 transition text-lg bg-white/70 placeholder-slate-400 shadow-sm"
        placeholder="Ex. 1234,56"
        autocomplete="off"
      />

      <button
        id="convertBtn"
        class="w-full bg-gradient-to-r from-indigo-500 via-sky-500 to-emerald-400 text-white font-bold py-3 rounded-lg shadow-md hover:from-indigo-600 hover:to-emerald-500 transition text-lg tracking-wide"
      >
        Convertir en lettres
      </button>

      <div id="result" class="mt-4 p-5 bg-gradient-to-br from-white/80 via-sky-50 to-emerald-50 rounded-xl text-slate-800 text-lg leading-relaxed break-words min-h-[3.5rem] shadow-inner border border-slate-100">
        Le résultat apparaîtra ici…
      </div>
      <button
        id="copyBtn"
        class="w-full mt-2 bg-gradient-to-r from-slate-200 via-sky-100 to-emerald-100 text-slate-700 font-medium py-2.5 rounded-lg hover:from-slate-300 hover:to-emerald-200 transition border border-slate-200 shadow-sm"
        type="button"
        aria-label="Copier le résultat"
      >
        Copier le résultat
      </button>
    </div>

    <!-- Simple JS converter (covers integers & 2-decimals) -->
    <script>
      // Liste des mots de base
      const UNITS = ['zéro', 'un', 'deux', 'trois', 'quatre', 'cinq', 'six', 'sept', 'huit', 'neuf'];
      const TEENS  = ['dix', 'onze', 'douze', 'treize', 'quatorze', 'quinze', 'seize', 'dix-sept', 'dix-huit', 'dix-neuf'];
      const TENS   = ['', '', 'vingt', 'trente', 'quarante', 'cinquante', 'soixante', 'soixante', 'quatre-vingt', 'quatre-vingt'];

      // Convertit un nombre entier 0-999
      function convertLessThan1000(n) {
        if (n < 10) return UNITS[n];
        if (n < 20) return TEENS[n - 10];
        if (n < 100) {
          let t = Math.floor(n / 10);
          let u = n % 10;
          // Gestion des "et un" (21, 31, 41, 51, 61, 71)
          if ((t === 2 || t === 3 || t === 4 || t === 5 || t === 6) && u === 1) {
            return TENS[t] + ' et un';
          }
          // 71, 81, 91
          if (t === 7 && u === 1) return 'soixante et onze';
          if (t === 9 && u === 1) return 'quatre-vingt-onze';
          // 70-79, 90-99
          if (t === 7) return 'soixante-' + TEENS[u];
          if (t === 9) return 'quatre-vingt-' + TEENS[u];
          // 80
          if (t === 8 && u === 0) return 'quatre-vingts';
          // 81, 91
          if (t === 8 && u === 1) return 'quatre-vingt-un';
          if (t === 8) return 'quatre-vingt-' + UNITS[u];
          return TENS[t] + (u ? '-' + UNITS[u] : '');
        }
        let h = Math.floor(n / 100);
        let rest = n % 100;
        let hundred = '';
        if (h === 1) {
          hundred = 'cent';
        } else {
          hundred = UNITS[h] + ' cent';
        }
        // Accord de "cent" : prend un "s" seulement si pas suivi d'autre nombre
        if (rest === 0 && h > 1) hundred += 's';
        if (rest === 0) return hundred;
        return hundred + ' ' + convertLessThan1000(rest);
      }

      // Convertit n'importe quel nombre entier
      function integerToWords(n) {
        if (n === 0) return 'zéro';
        // Échelles étendues jusqu'à décillion
        const scales = [
          '', 'mille', 'million', 'milliard', 'billion', 'billiard',
          'trillion', 'trilliard', 'quadrillion', 'quadrilliard',
          'quintillion', 'quintilliard', 'sextillion', 'sextilliard',
          'septillion', 'septilliard', 'octillion', 'octilliard',
          'nonillion', 'nonilliard', 'décillion', 'décilliard'
        ];
        let parts = [];
        let scaleIndex = 0;
        while (n > 0) {
          let chunk = n % 1000;
          if (chunk) {
            let chunkWords = convertLessThan1000(chunk);
            // "un mille" -> "mille"
            if (scaleIndex === 1 && chunk === 1) {
              chunkWords = 'mille';
            }
            // Pluriels pour million, milliard, etc.
            if (scaleIndex > 1) {
              chunkWords += ' ' + scales[scaleIndex];
              if (chunk > 1) chunkWords += 's';
            } else if (scaleIndex === 1 && chunk > 1) {
              chunkWords += ' ' + scales[scaleIndex];
            }
            parts.unshift(chunkWords);
          }
          n = Math.floor(n / 1000);
          scaleIndex++;
        }
        return parts.join(' ');
      }

      // Gestionnaire principal
      document.getElementById('convertBtn').addEventListener('click', () => {
        const val = document.getElementById('numberInput').value.trim().replace(',', '.');
        if (!/^-?\d+(\.\d{1,2})?$/.test(val)) {
          document.getElementById('result').textContent = 'Veuillez saisir un nombre valide.';
          return;
        }
        const num = parseFloat(val);
        if (num === 0) { document.getElementById('result').textContent = 'zéro'; return; }

        const sign = num < 0 ? 'moins ' : '';
        const parts = Math.abs(num).toFixed(2).split('.');
        const intPart = integerToWords(parseInt(parts[0]));
        let result = sign + intPart;
        if (parts[1] && parts[1] !== '00') {
          result += ' virgule ' + parts[1].split('').map(d => UNITS[parseInt(d)]).join(' ');
        }
        document.getElementById('result').textContent = result;
      });

      // Gestion du bouton Copier
      document.getElementById('copyBtn').addEventListener('click', () => {
        const resultText = document.getElementById('result').textContent;
        if (resultText && resultText.trim() !== '' && resultText !== 'Le résultat apparaîtra ici…') {
          navigator.clipboard.writeText(resultText).then(() => {
            const btn = document.getElementById('copyBtn');
            const old = btn.textContent;
            btn.textContent = 'Copié !';
            btn.classList.add('bg-green-200','text-green-800');
            setTimeout(() => {
              btn.textContent = old;
              btn.classList.remove('bg-green-200','text-green-800');
            }, 1200);
          });
        }
      });
    // --- Tests unitaires simples ---
    function runTests() {
      const tests = [
        [0, 'zéro'],
        [1, 'un'],
        [11, 'onze'],
        [21, 'vingt et un'],
        [71, 'soixante et onze'],
        [80, 'quatre-vingts'],
        [81, 'quatre-vingt-un'],
        [100, 'cent'],
        [101, 'cent un'],
        [200, 'deux cents'],
        [201, 'deux cent un'],
        [1000, 'mille'],
        [2000, 'deux mille'],
        [1000000, 'un million'],
        [2000000, 'deux millions'],
        [1000000000, 'un milliard'],
        [2000000000, 'deux milliards'],
        [1000000000000, 'un billion'],
        [2000000000000, 'deux billions'],
        [1000000000000000, 'un billiard'],
        [1000000000000000000, 'un trillion'],
        [1000000000000000000000, 'un trilliard'],
        [1000000000000000000000000, 'un quadrillion'],
        [1000000000000000000000000000, 'un quadrilliard'],
        [1000000000000000000000000000000, 'un quintillion'],
        [1000000000000000000000000000000000, 'un quintilliard'],
      ];
      let ok = 0, fail = 0;
      for (const [input, expected] of tests) {
        const got = integerToWords(input);
        if (got === expected) {
          ok++;
        } else {
          fail++;
          console.error(`Test raté: ${input} → ${got} (attendu: ${expected})`);
        }
      }
      console.log(`Tests passés: ${ok} réussis, ${fail} échecs.`);
    }
    // Décommentez la ligne suivante pour lancer les tests dans la console:
    // runTests();
    </script>
  </body>
</html>